@model SalesAndInentoryWeb_Application.Models.tbl_PurchaseBill
@{
	ViewBag.Title = "purchseBill";
	Layout = "~/Views/Shared/ideal.cshtml";
}
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
	<style>
		.scrolldown {
			overflow-y: scroll;
			height: 100px;
		}

		textarea.form-control {
			height: 40px;
			margin: 0px;
			resize: vertical;
		}
	</style>
	<script src="~/scripts/jquery-1.12.4.min.js"></script>
	<script type="text/javascript">
        $(document).ready(function () {
            $("#btnaddtolist").click(function () {
                AddToItem();
            });
            $("#btnsubmit").click(function (e) {
                additems();
            });
        });
        function RemoveItem(ItemName)
        {
            $(ItemName).closest('tr').remove();
        }
        function AddToItem()
        {
            var tableitemlist = $("#tblPurchaseBill");
            var ItemName=$("#ItemName").val();
            var mrp = $("#sp").val();
            var tax = $("#ts").val();
            var dis = $("#ds").val();
            var qty = $("#qty").val();
            var disamt = $("#da").val();
            var taxmat = $("#sa").val();
            var total = $("#ca").val();

            var itemlist = "<tr><div class='scrollit'><td>"
                + ItemName +
                "</td><td>"
                + mrp +
                "</td><td>"
                + tax +
                "</td><td>"
                + dis +
                "</td><td>"
               + qty +
                "</td><td>"
                + disamt +
                "</td><td>"
               + taxmat +
               "</td><td>"
              + total +
                 "</td><td>" +
                 "<input type='button' value='Remove' name='remove' class='btn btn-danger' onclick='RemoveItem(this)'/>" +
               "</td></div></tr>"
              tableitemlist.append(itemlist);
               reset();
        }
        function reset()
        {
            $("#ItemName").val('');
            $("#sp").val('');
            $("#ts").val('');
            $("#ds").val('');
            $("#qty").val('');
            $("#da").val('');
            $("#sa").val('');
            $("#ca").val('');
        }
        function additems()
        {
            debugger
            var objpurchase = {};
            var listpurchases = [];

            $.each($("#tblPurchaseBill tbody tr"),
                function () {
                    listpurchases.push({
                        ItemName: $(this).find("td:eq(0)").text(),
                        SalePrice: $(this).find("td:eq(1)").text(),
                        //TaxForSale: $(this).find("td:eq(2)").text(),
                        //Discount: $(this).find("td:eq(3)").text(),
                        //Qty: $(this).find("td:eq(4)").text(),
                        //DiscountAmount: $(this).find("td:eq(5)").text(),
                        //SaleTaxAmount: $(this).find("td:eq(6)").text(),
                        //ItemAmount: $(this).find("td:eq(7)").text()
                    });
                });

            objpurchase.PartyName = $("#PartyName").val();
            objpurchase.BillingName = $("#BillingName").val();
            //obj.ContactNo = $("#ContactNo").val();
            //obj.BillDate = $("#BillDate").val();
            //obj.DueDate = $("#DueDate").val();
            //obj.Barcode = $("#Barcode").val();
            //obj.StateOfSupply = $("#StateOfSupply").val();
            //obj.Paid = $("#Received").val();
            //obj.RemainingBal = $("#RemainingBal").val();
            //obj.TransportName = $("#TransportName").val();

            //obj.DeliveryLocation = $("#DeliveryLocation").val();
            //obj.DeliverDate = $("#DeliveryDate").val();
            //obj.PaymentType = $("#PaymentType").val();
            //obj.TransportName = $("#TransportName").val();
            //obj.Status = $("#Status").val();
            //obj.VehicleNumber = $("#VehicleNumber").val();
            //obj.CalTotal = $("#CalTotal").val();
            objpurchase.listpurchasedetail = listpurchases;


            $.ajax({
                async: true,
                type: "POST",
                datatype: 'JSON',
                contentType: 'application/json;charset=utf-8',
                data: JSON.stringify(objpurchase),
                url: '/PurchaseBill/AddPurchase',
                success: function (data) {
                    if (data.status == true) {
                        alter(data.message);
                    }
                },
                error: function () {
                    alert("error");
                }

            });
        }
	</script>
</head>
<body>
	@using (Html.BeginForm())
	{
		<div class="panel panel-primary container" style="height:100%; width:100%;">
			<div class="panel-heading"><a class="btn" href=@Url.Action("Index","PurchaseBill") style="background-color:#05445E;color:white">Back To List</a><p style="margin-left:486px;margin-top: -31px;font-weight:bold;font-size:20px;">Purchase Bill</p></div>
			<div class="panel border-box">

				<div class="container-fluid">
					<div class="collapse navbar-collapse ">

						<div class="row">
							<div class="form-group col-md-3">							
								Party Name:
                                @Html.DropDownListFor(model => model.PartyName, new List<SelectListItem>
                                   {
                                       new SelectListItem {Text = "Vithoba", Value = "Vithoba", Selected = true },
                                       new SelectListItem {Text = "Rahul", Value = "Rahul" },
                                       new SelectListItem {Text = "Pallai", Value = "Pallai" },
                                       new SelectListItem {Text = "Bhagyashri", Value = "Bhagyashri" },
                                   }, new { @class = "form-control", @style = "width:130px", @name = "PartyName", @id = "PartyName" })


								Address:	
                                <br>							
								@Html.TextAreaFor(model => model.BillingName, new { htmlAttributes = new { @class = "form-control", placeholder = "Address"} })
                                <br>
								Contact No:
								@Html.EditorFor(model => model.ContactNo, new { htmlAttributes = new { @class = "form-control", placeholder = "Mobile No.....", @style = "width:220px;height:32px" } })
								
							</div>
							<div class="form-group col-md-7">
								<div class="pull-right">
									Po No
									@Html.EditorFor(model => model.PONo, new { htmlAttributes = new { @class = "form-control", placeholder = "Po Number", @style = "width:145px;height:30px" } })
									@Html.ValidationMessageFor(model => model.PONo)
									PO Date:
									@Html.TextBoxFor(model => model.PoDate, new { @type = "date", @class = "form-control", @style = "width:150px;" })
									Barcode:
									@Html.EditorFor(model => model.Barcode, new { htmlAttributes = new { @class = "form-control", placeholder = "BarcodNo", @style = "width:150px;height:30px" } })
									@Html.ValidationMessageFor(model => model.Barcode)

								</div>
							</div>
							<div class="form-group col-md-2">

								<div class="pull-right">
									E-Way BillNo:
									@Html.EditorFor(model => model.Feild4, new { htmlAttributes = new { @class = "form-control", placeholder = "Eway Bill Number", @style = "width:145px;height:30px" } })
									@Html.ValidationMessageFor(model => model.Feild4)
									State :
									<select name="state" id="StateOfSupply" class="form-control" style="width:150px;height:30px">
										<option value="Andhra Pradesh">Andhra Pradesh</option>
										<option value="Andaman and Nicobar Islands">Andaman and Nicobar Islands</option>
										<option value="Arunachal Pradesh">Arunachal Pradesh</option>
										<option value="Assam">Assam</option>
										<option value="Bihar">Bihar</option>
										<option value="Chandigarh">Chandigarh</option>
										<option value="Chhattisgarh">Chhattisgarh</option>
										<option value="Dadar and Nagar Haveli">Dadar and Nagar Haveli</option>
										<option value="Daman and Diu">Daman and Diu</option>
										<option value="Delhi">Delhi</option>
										<option value="Lakshadweep">Lakshadweep</option>
										<option value="Puducherry">Puducherry</option>
										<option value="Goa">Goa</option>
										<option value="Gujarat">Gujarat</option>
										<option value="Haryana">Haryana</option>
										<option value="Himachal Pradesh">Himachal Pradesh</option>
										<option value="Jammu and Kashmir">Jammu and Kashmir</option>
										<option value="Jharkhand">Jharkhand</option>
										<option value="Karnataka">Karnataka</option>
										<option value="Kerala">Kerala</option>
										<option value="Madhya Pradesh">Madhya Pradesh</option>
										<option value="Maharashtra">Maharashtra</option>
										<option value="Manipur">Manipur</option>
										<option value="Meghalaya">Meghalaya</option>
										<option value="Mizoram">Mizoram</option>
										<option value="Nagaland">Nagaland</option>
										<option value="Odisha">Odisha</option>
										<option value="Punjab">Punjab</option>
										<option value="Rajasthan">Rajasthan</option>
										<option value="Sikkim">Sikkim</option>
										<option value="Tamil Nadu">Tamil Nadu</option>
										<option value="Telangana">Telangana</option>
										<option value="Tripura">Tripura</option>
										<option value="Uttar Pradesh">Uttar Pradesh</option>
										<option value="Uttarakhand">Uttarakhand</option>
										<option value="West Bengal">West Bengal</option>
									</select>
									Invoice Date:
									@Html.TextBoxFor(model => model.BillDate, new { @type = "date", @class = "form-control", @style = "width:150px;" })
								</div>
							</div>
						</div>
					</div>
				</div>

                <nav class="navbar navbar-default ">
                    <div class="container-fluid">
                        <div class="collapse navbar-collapse ">
                            <div class="row">
                                <div class="form-group col-md-2">
                                    <label>Item Name</label>
                                    @Html.DropDownListFor(model => model.tbl_PurchaseBillInner1.ItemName, new List<SelectListItem>
                                   {
                                       new SelectListItem {Text = "volvo", Value = "volvo", Selected = true },
                                       new SelectListItem {Text = "bottle", Value = "bottle" },
                                       new SelectListItem {Text = "pen", Value = "pen" },
                                       new SelectListItem {Text = "don", Value = "don" },
                                   }, new { @class = "form-control", @style = "width:130px", @name = "ItemName", @id = "ItemName" })


                                </div>
                                <div class="form-group col-md-1">
                                    <label>MRP</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.SalePrice, htmlAttributes: new { id = "sp", @style = "width:130px;height:35px", @class = "form-control", @name = "SalePrice" })
                                </div>
                                <div class="form-group col-md-1">
                                    <label>Tax%</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.TaxForSale, htmlAttributes: new { id = "ts", @style = "width:130px;height:35px", @class = "form-control" })
                                </div>
                                <div class="form-group col-md-1">
                                    <label>Descount</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.Discount, htmlAttributes: new { id = "ds", @style = "width:130px;height:35px", @class = "form-control" })
                                </div>
                                <div class="form-group col-md-1">
                                    <label>Qty</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.Qty, htmlAttributes: new { id = "qty", @style = "width:130px;height:35px", @class = "form-control" })
                                </div>
                                <div class="form-group col-md-1">
                                    <label>Dis Amount</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.DiscountAmount, htmlAttributes: new { id = "da", @style = "width:130px;height:35px", @class = "form-control" })
                                </div>
                                <div class="form-group col-md-2">
                                    <label>Tax Amount</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.SaleTaxAmount, htmlAttributes: new { id = "sa", @style = "width:130px;height:35px", @class = "form-control" })
                                </div>
                                <div class="form-group col-md-2">
                                    <label>Total</label>
                                    @Html.TextBoxFor(item => item.tbl_PurchaseBillInner1.ItemAmount, htmlAttributes: new { id = "ca", @style = "width:130px;height:35px;", @class = "form-control" })
                                </div>
                                <div class="col-md-1">
                                    <a class="btn btn-success pull-right" style="margin-top:20px;" id="btnaddtolist"><i class="fa fa-plus"></i>Add Item</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </nav>

				<nav class="navbar navbar-default " style="border:none; background-color:white">
					<div class="container-fluid">
						<div class="collapse navbar-collapse ">
							<div class="form-group scrolldown" style="height:200px">
								<table class="table table-striped table-bordered" style="width:100%;" id="tblPurchaseBill">
									<thead>
										<tr>
                                            <th>
                                                Item Name
                                            </th>
                                            <th>
                                                MRP
                                            </th>
                                            <th>
                                                Tax%
                                            </th>
                                            <th>
                                                Descount
                                            <th>
                                                Qty
                                            </th>
                                            <th>
                                                Dis Amount
                                            </th>
                                            <th>
                                                Tax Amount
                                            </th>
                                            <th>
                                                Total
                                            </th>					
										</tr>
									</thead>

								</table>
							</div>
						</div>
					</div>
				</nav>
				<div class="container-fluid">
					<div class="collapse navbar-collapse ">
						<div class="row">

							<div class="col-md-2">
								Payment Type:
								<select name="cars" id="dp" class="form-control" style="width:150px;">
									<option value="Cash">Cash</option>
									<option value="Onliepayment">Online Payment</option>
									<option value="Cheque">Cheue</option>
								</select>
								Transport Name:
								@Html.DevExpress().TextBoxFor(m => m.TransportName, settings =>
								  {
									  settings.Properties.NullText = "TransportName";
									  settings.ControlStyle.CssClass = "form-control";
									  settings.Style["width"] = "150px";
									  settings.Style["height"] = "30px";
								  }).GetHtml()
								Vical No:
								@Html.EditorFor(model => model.VehicleNumber, new
								  {
									  htmlAttributes = new
									  {
										  @class = "form-control",
										  placeholder = "vical No",
										  @style = "width:150px;height:30px;"
									  }
								  })
								@Html.ValidationMessageFor(model => model.VehicleNumber)
							</div>
							<div class="col-md-2 form-group">
								Cheque No:
								@Html.EditorFor(model => model.Feild1, new { htmlAttributes = new { @class = "form-control", placeholder = "Cheek no", @style = "width:150px;" } })
								@Html.ValidationMessageFor(model => model.Feild1)

								Delivery Date:
								@Html.TextBoxFor(model => model.Deliverydate, new { @type = "date", @class = "form-control", @style = "width:150px;" })
								Payment Status:
								<select name="cars" id="dp" class="form-control" style="width:150px;">
									<option value="volvo">Paid</option>
									<option value="saab">Unpiad</option>
								</select>
							</div>
							<div class="col-md-8 form-group">
								<div class="pull-right">
									Total :
									@Html.EditorFor(model => model.Total, new { htmlAttributes = new { @class = "form-control", placeholder = "Total Amount" } })
									@Html.ValidationMessageFor(model => model.Total)
									Recived:
									@Html.EditorFor(model => model.Paid, new { htmlAttributes = new { @class = "form-control", placeholder = "Recive Ammount" } })
									@Html.ValidationMessageFor(model => model.Paid)
									Remining Bal:

									@Html.EditorFor(model => model.RemainingBal, new { htmlAttributes = new { @class = "form-control", placeholder = "Remining Balance" } })
									@Html.ValidationMessageFor(model => model.RemainingBal)


								</div>

							</div>

						</div>


					</div>
					<div class="row">
						<div class="col-md-1 form-group" style="margin-top:8px; ">

						</div>
						<div class="col-md-3">

						</div>
						<div class="col-md-1 form-group" style="margin-top:8px; ">

						</div>
						<div class="col-md-3 form-group">
							<input type="submit" value="Submit" class="btn btn-primary pull-left" style="margin-right:12px; width:100px; " id="btnsubmit"/>
							<input type="reset" value="Clear" class="btn btn-primary pull-right" style="margin-right:12px; width:100px;" />

						</div>


						<div class="col-md-1 form-group" style="margin-top:8px; ">

						</div>
						<div class="col-md-3 form-group">

						</div>

					</div>


				</div>
			</div>
			<div>

			</div>
		</div>



	}









	<br />

	<br />

	<br />

	<br />

	<br />

	<br />

	<br />

	<br />

	<br />

	<br />

</body>
</html>
